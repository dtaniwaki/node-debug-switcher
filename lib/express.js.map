{"version":3,"sources":["express.coffee"],"names":[],"mappings":"AAAA,IAAA;;AAAA,KAAA,GAAQ,OAAA,CAAQ,SAAR;;AACR,MAAA,GAAS,OAAA,CAAQ,QAAR;;AAET,MAAM,CAAC,OAAP,GAAiB,SAAC,GAAD,EAAM,OAAN;AACf,MAAA;EAAA,YAAA,UAAY;EACZ,MAAA,GAAS,OAAO,CAAC;EACjB,QAAA,GAAW,OAAO,CAAC;EACnB,GAAA,GAAM,OAAO,CAAC,GAAR,IAAe;EACrB,IAAA,GAAO,OAAO,CAAC;EAEf,MAAA,CAAO,IAAP,EAAa,kBAAb;EACA,IAA2C,MAA3C;IAAA,MAAA,CAAO,QAAP,EAAiB,sBAAjB,EAAA;;SAEA,SAAC,GAAD,EAAM,GAAN,EAAW,IAAX;AACE,QAAA;IAAA,KAAA,GAAQ,OAAO,CAAC,GAAI,CAAA,GAAA;AAEpB,YAAO,IAAP;AAAA,WACO,QADP;QAEI,QAAA,oCAAwB,CAAA,GAAA;AADrB;AADP,WAGO,OAHP;QAII,QAAA,oCAAsB,CAAA,GAAA;AAJ1B;IAMA,IAAG,QAAH;MACE,IAAG,MAAH;QACE,QAAA,GAAW,KAAK,CAAC,cAAN,CAAqB,QAArB,EAA+B,QAA/B,EADb;;MAEA,OAAO,CAAC,GAAR,CAAY,cAAA,GAAe,GAAf,GAAmB,GAA/B,EAAmC,QAAnC;MACA,OAAO,CAAC,GAAI,CAAA,GAAA,CAAZ,GAAmB,SAJrB;;AAMA;aACE,IAAA,CAAA,EADF;KAAA;MAGE,IAAG,QAAH;QACE,OAAO,CAAC,GAAR,CAAY,kBAAA,GAAmB,GAAnB,GAAuB,GAAnC,EAAuC,KAAvC;QACA,OAAO,CAAC,GAAI,CAAA,GAAA,CAAZ,GAAmB,MAFrB;OAHF;;EAfF;AAVe","file":"express.js","sourceRoot":"/src","sourcesContent":["utils = require './utils'\nassert = require 'assert'\n\nmodule.exports = (key, options) ->\n  options ||= {}\n  secure = options.secure\n  password = options.password\n  env = options.env || 'NODE_DEBUG'\n  type = options.type\n\n  assert type, 'type is required'\n  assert password, 'password is required' if secure\n\n  (req, res, next) ->\n    debug = process.env[env]\n\n    switch type\n      when 'cookie'\n        newDebug = req.cookies?[key]\n      when 'query'\n        newDebug = req.query?[key]\n\n    if newDebug\n      if secure\n        newDebug = utils.decode64Cipher(newDebug, password)\n      console.log \"Set the env #{env}:\", newDebug\n      process.env[env] = newDebug\n\n    try\n      next()\n    finally\n      if newDebug\n        console.log \"Restore the env #{env}:\", debug\n        process.env[env] = debug\n"]}