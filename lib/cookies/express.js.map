{"version":3,"sources":["cookies/express.coffee"],"names":[],"mappings":"AAAA,IAAA,aAAA;;AAAA,KAAA,GAAQ,OAAA,CAAQ,UAAR,CAAR,CAAA;;AAAA,MACA,GAAS,OAAA,CAAQ,QAAR,CADT,CAAA;;AAAA,MAGM,CAAC,OAAP,GAAiB,SAAC,GAAD,EAAM,OAAN,GAAA;AACf,MAAA,gBAAA;AAAA,EAAA,YAAA,UAAY,GAAZ,CAAA;AAAA,EACA,MAAA,GAAS,OAAO,CAAC,MADjB,CAAA;AAAA,EAEA,QAAA,GAAW,OAAO,CAAC,QAFnB,CAAA;AAIA,EAAA,IAA2C,MAA3C;AAAA,IAAA,MAAA,CAAO,QAAP,EAAiB,sBAAjB,CAAA,CAAA;GAJA;SAMA,SAAC,GAAD,EAAM,GAAN,EAAW,IAAX,GAAA;AACE,QAAA,0BAAA;AAAA,IAAA,KAAA,GAAQ,OAAO,CAAC,GAAG,CAAC,UAApB,CAAA;AAAA,IAEA,QAAA,sCAAwB,CAAA,GAAA,UAFxB,CAAA;AAGA,IAAA,IAAG,MAAH;AACE,MAAA,QAAA,GAAW,KAAK,CAAC,cAAN,CAAqB,QAArB,EAA+B,QAA/B,CAAX,CADF;KAHA;AAKA,IAAA,IAAqC,QAArC;AAAA,MAAA,OAAO,CAAC,GAAG,CAAC,UAAZ,GAAyB,QAAzB,CAAA;KALA;AAOA;AACE,MAAA,IAAA,CAAA,CAAA,CADF;KAAA,cAAA;AAGE,MADI,YACJ,CAAA;AAAA,MAAA,OAAO,CAAC,GAAG,CAAC,UAAZ,GAAyB,KAAzB,CAAA;AACA,YAAM,GAAN,CAJF;KAPA;WAYA,OAAO,CAAC,GAAG,CAAC,UAAZ,GAAyB,MAb3B;EAAA,EAPe;AAAA,CAHjB,CAAA","file":"cookies/express.js","sourceRoot":"/src","sourcesContent":["utils = require '../utils'\nassert = require 'assert'\n\nmodule.exports = (key, options) ->\n  options ||= {}\n  secure = options.secure\n  password = options.password\n\n  assert password, 'password is required' if secure\n\n  (req, res, next) ->\n    debug = process.env.NODE_DEBUG\n\n    newDebug = req.cookies?[key]\n    if secure\n      newDebug = utils.decode64Cipher(newDebug, password)\n    process.env.NODE_DEBUG = newDebug if newDebug\n\n    try\n      next()\n    catch err\n      process.env.NODE_DEBUG = debug\n      throw err\n    process.env.NODE_DEBUG = debug\n"]}