{"version":3,"sources":["koa.coffee"],"names":[],"mappings":"AAAA,IAAA,aAAA;;AAAA,KAAA,GAAQ,OAAA,CAAQ,SAAR,CAAR,CAAA;;AAAA,MACA,GAAS,OAAA,CAAQ,QAAR,CADT,CAAA;;AAAA,MAGM,CAAC,OAAP,GAAiB,SAAC,GAAD,EAAM,OAAN,GAAA;AACf,MAAA,2BAAA;AAAA,EAAA,YAAA,UAAY,GAAZ,CAAA;AAAA,EACA,MAAA,GAAS,OAAO,CAAC,MADjB,CAAA;AAAA,EAEA,QAAA,GAAW,OAAO,CAAC,QAFnB,CAAA;AAAA,EAGA,GAAA,GAAM,OAAO,CAAC,GAAR,IAAe,YAHrB,CAAA;AAAA,EAIA,IAAA,GAAO,OAAO,CAAC,IAJf,CAAA;AAAA,EAMA,MAAA,CAAO,IAAP,EAAa,kBAAb,CANA,CAAA;AAOA,EAAA,IAA2C,MAA3C;AAAA,IAAA,MAAA,CAAO,QAAP,EAAiB,sBAAjB,CAAA,CAAA;GAPA;SASA,UAAC,IAAD,GAAA;AACE,QAAA,oBAAA;AAAA,IAAA,KAAA,GAAQ,OAAO,CAAC,GAAI,CAAA,GAAA,CAApB,CAAA;AAEA,YAAO,IAAP;AAAA,WACO,QADP;AAEI,QAAA,QAAA,GAAW,IAAC,CAAA,OAAO,CAAC,GAAT,CAAa,GAAb,CAAX,CAFJ;AACO;AADP,WAGO,OAHP;AAII,QAAA,QAAA,GAAW,IAAC,CAAA,KAAM,CAAA,GAAA,CAAlB,CAJJ;AAAA,KAFA;AAQA,IAAA,IAAG,QAAH;AACE,MAAA,IAAG,MAAH;AACE,QAAA,QAAA,GAAW,KAAK,CAAC,cAAN,CAAqB,QAArB,EAA+B,QAA/B,CAAX,CADF;OAAA;AAAA,MAEA,OAAO,CAAC,GAAI,CAAA,GAAA,CAAZ,GAAmB,QAFnB,CADF;KARA;AAaA;AACE,MAAA,OAAA,IAAA,CAAA,CADF;KAAA,cAAA;AAGE,MADI,YACJ,CAAA;AAAA,MAAA,OAAO,CAAC,GAAI,CAAA,GAAA,CAAZ,GAAmB,KAAnB,CAAA;AAAA,MACA,IAAC,CAAA,OAAA,CAAD,CAAO,GAAP,CADA,CAHF;KAbA;WAkBA,OAAO,CAAC,GAAI,CAAA,GAAA,CAAZ,GAAmB,MAnBrB;EAAA,EAVe;AAAA,CAHjB,CAAA","file":"koa.js","sourceRoot":"/src","sourcesContent":["utils = require './utils'\nassert = require 'assert'\n\nmodule.exports = (key, options) ->\n  options ||= {}\n  secure = options.secure\n  password = options.password\n  env = options.env || 'NODE_DEBUG'\n  type = options.type\n\n  assert type, 'type is required'\n  assert password, 'password is required' if secure\n\n  (next) ->\n    debug = process.env[env]\n\n    switch type\n      when 'cookie'\n        newDebug = @cookies.get key\n      when 'query'\n        newDebug = @query[key]\n\n    if newDebug\n      if secure\n        newDebug = utils.decode64Cipher(newDebug, password)\n      process.env[env] = newDebug\n\n    try\n      yield next\n    catch err\n      process.env[env] = debug\n      @throw err\n    process.env[env] = debug\n"]}